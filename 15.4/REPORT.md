# Отчет по практической работе 15.4 - Повышение Уровня Зрелости API

## Задача 2: Анализ и повышение уровня зрелости API

### 1. Текущий Уровень Зрелости (Current Maturity Level)

Текущий контракт API состоит из следующих эндпоинтов:
- `GET /get-room`
- `POST /add-room`
- `POST /booking`

**Оценка:** Текущий API соответствует **Уровню 1 (Resources)** модели зрелости Ричардсона, приближаясь к Уровню 0 (Swamp/The Swamp of POX).

**Обоснование:**
1.  **Уровень 0 (The Swamp of POX):** API использует HTTP-методы, но не полностью. `GET` используется для получения данных، `POST` برای تغییر داده‌ها.
2.  **Уровень 1 (Resources):** API использует *несколько* URI (منابع) (`/get-room`, `/add-room`, `/booking`), что является ключевым критерием. Однако, оно не использует HTTP-методы в соответствии с семантикой (RESTful verbs) برای هر منبع. Например، `POST /add-room` باید به `POST /rooms` تغییر یابد و `POST /booking` باید به منبع رزرو ارجاع دهد.

### 2. Рекомендации по Улучшению и Новый Контракт (New Contract)

Для достижения **Уровня 2 (HTTP Verbs)**، ما باید از متدهای HTTP استاندارد برای عملیات CRUD (Create, Read, Update, Delete) بر روی منابع استفاده کنیم.

| عملیات (Operation) | قرارداد فعلی (Current Contract) | قرارداد پیشنهادی (Proposed Contract - Level 2) | تغییرات و توجیه (Changes and Justification) |
| :--- | :--- | :--- | :--- |
| **دریافت لیست اتاق‌ها** | `GET /get-room` | `GET /rooms` | نامگذاری بهتر: `rooms` نشان دهنده مجموعه منابع (Collection Resource) است. |
| **افزودن اتاق جدید** | `POST /add-room` | `POST /rooms` | استفاده از `POST` بر روی مجموعه برای ایجاد یک منبع جدید (RESTful standard). |
| **رزرو اتاق** | `POST /booking` | `DELETE /rooms/{roomId}` یا `POST /reservations` | **Option A (Simpler):** رزرو به عنوان حذف دسترسی به منبع (اتاق) دیده می‌شود. **Option B (Better REST):** ایجاد یک منبع جدید `reservations` با استفاده از `POST /reservations`. |
| **دریافت وضعیت اتاق خاص** | (ناموجود) | `GET /rooms/{roomId}` | اضافه شدن برای دسترسی مستقیم به یک منبع (Single Resource). |

**جدول جدید عملیات API (New API Contract - Level 2 Focused):**

| عملیات (Operation) | متد (Method) | URI (Resource) | شرح (Description) |
| :--- | :--- | :--- | :--- |
| دریافت همه اتاق‌ها | `GET` | `/rooms` | بازیابی تمام اتاق‌های موجود. |
| افزودن اتاق جدید | `POST` | `/rooms` | ایجاد یک اتاق جدید. |
| دریافت جزئیات اتاق | `GET` | `/rooms/<int:room_id>` | بازیابی جزئیات یک اتاق خاص. |
| رزرو/حذف اتاق | `DELETE` | `/rooms/<int:room_id>` | حذف یک اتاق (از دسترس خارج کردن آن/رزرو کردن آن). در این زمینه، رزرو به معنی حذف از لیست موجودی است. |

**توجیه تغییر کد پاسخ در رزرو:**
- در قرارداد فعلی، `POST /booking` در صورت تکرار ۴۰۹ (Conflict) برمی‌گرداند.
- در قرارداد پیشنهادی (`DELETE /rooms/<int:room_id>`):
    - در صورت موفقیت: `204 No Content` (توصیه شده برای DELETE).
    - در صورت عدم وجود منبع/رزرو قبلی: `404 Not Found` (بهتر از ۴۰۹ برای این مورد).

---

### ۳. نتیجه‌گیری (Conclusion)

با اعمال تغییرات پیشنهادی، API از سطح ۱ به سطح **۲ (HTTP Verbs)** مدل بلوغ ریچاردسون ارتقا می‌یابد و به اصول RESTful نزدیک‌تر می‌شود. این امر خوانایی، قابلیت نگهداری و استفاده از API را برای مشتریان بهبود می‌بخشد.
